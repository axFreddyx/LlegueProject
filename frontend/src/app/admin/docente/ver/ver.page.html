<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-menu-button menu="menuId"></ion-menu-button>
            <ion-back-button text="Regresar"></ion-back-button>
        </ion-buttons>
        <ion-title class="text-center">
            <div class="header-title">
                <img src="assets/img/escuela.png" alt="" class="logo-title">
                <!-- <span class="span-title">Panel Administrativo</span> -->
            </div>
        </ion-title>
        <ion-buttons slot="end">
            <ion-button routerLink="/perfil" title="Mi perfil">
                <ion-icon name="person-circle-outline"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <div class="container">

        <h1 class="titulo text-center">Ver Docentes</h1>
        <div class="text-center">
            <ion-button class="cuenta-btn" fill="solid" size="large" (click)="redirectToAddDocente()">
                <ion-icon slot="start" name="person-add-outline"></ion-icon>
                Agregar Docente
            </ion-button>
        </div>

        <ion-list lines="none">
            <ion-button (click)="selectingDocentes()" *ngIf="!isSelecting && docentes.length !== 0" expand="block"
                fill="clear" shape="round">
                <ion-icon name="checkmark-outline" slot="start"></ion-icon>
                Seleccionar Docentes
            </ion-button>
            <ion-button (click)="notSelectingDocentes()" color="medium" *ngIf="isSelecting" expand="block" fill="clear"
                shape="round">
                <ion-icon name="close-outline" slot="start"></ion-icon>
                Cancelar selecci√≥n
            </ion-button>
            <div class="acciones" *ngIf="isSelecting && docentes.length !== 0">
                <ion-checkbox slot="start" color="primary" [(ngModel)]="allSelected"
                    (ionChange)="toggleSelectAll($event)" aria-label="Seleccionar todos los docentes">
                </ion-checkbox>
                <label (click)="toggleSelectAllLabel()" class="select-all-label">
                    Seleccionar todos
                </label>
                <ion-button (click)="openAlertDelete()" size="small" fill="outline" color="danger">
                    ‚ùå Eliminar
                </ion-button>
            </div>
            <ion-item class="docente-item" *ngFor="let d of docentes" (click)="isSelecting ? clickDocente(d) : null">
                <!-- CHECKBOX -->
                <ion-checkbox disabled *ngIf="isSelecting" slot="start" color="primary" [(ngModel)]="d.selected"
                    (click)="selectDocentes(d)"
                    [attr.aria-label]="'Seleccionar docente ' + d.nombre + ' ' + d.apellidos"></ion-checkbox>
                <ion-avatar slot="start">
                    <img src="assets/img/ejemplo.jpg" alt="Ana L√≥pez" />
                </ion-avatar>
                <ion-label>
                    <h2>{{d.nombre}} {{d.apellidos}}</h2>
                    <p>ID: {{d.id}}</p>
                    <p>
                        Grado y Grupo:
                        <span *ngIf="d.salon === null" class="text-danger">No asignado</span>
                        <span *ngIf="d.salon !== null">{{d.salon.grado}} {{d.salon.grupo}}</span>
                    </p>
                    <div class="acciones" *ngIf="!isSelecting">
                        <ion-button size="small" (click)="redirectToEditDocente(d)" fill="outline" color="primary">
                            üìù Editar
                        </ion-button>
                        <ion-button size="small" fill="outline" color="danger">
                            ‚ùå Eliminar
                        </ion-button>
                        <ion-button (click)="openModal(d)" size="small" fill="outline" color="warning">
                            üè´ Asignar Sal√≥n
                        </ion-button>
                    </div>
                </ion-label>
            </ion-item>
        </ion-list>
    </div>

    <ion-modal trigger="open-modal">
        <ng-template>
            <ion-header>
                <ion-toolbar color="primary">
                    <ion-title>Salones Disponibles</ion-title>
                    <ion-buttons slot="end">
                        <ion-button (click)="cancel()" color="light" fill="solid" shape="round" size="small"
                            aria-label="Cerrar modal">
                            <ion-icon name="close-outline"></ion-icon>
                            Cerrar
                        </ion-button>

                    </ion-buttons>
                </ion-toolbar>
            </ion-header>

            <ion-content class="ion-padding modal-salones-content">
                <div class="salones-header">
                    <h2>Salones Disponibles</h2>
                    <p>Selecciona un sal√≥n para asignar al docente <b>{{docente?.nombre}} {{docente?.apellidos}}</b></p>
                </div>
                <ion-card *ngIf="salones.length === 0" class="no-salones-card">
                    <ion-card-header>
                        <ion-card-title>No hay salones disponibles</ion-card-title>
                    </ion-card-header>
                    <ion-card-content>
                        <p>Actualmente no hay salones disponibles para asignar.</p>
                    </ion-card-content>
                </ion-card>
                <div class="salones-container">
                    <ion-card *ngFor="let salon of salones" class="salon-card" (click)="openAlert(salon)">
                        <ion-card-header>
                            <ion-card-title>{{ salon.grado }} ¬∞ {{salon.grupo}}</ion-card-title>
                        </ion-card-header>
                        <ion-card-content>
                            <p class="alumnos-text">Total de alumnos: {{ salon.totalAlumnos }}</p>
                        </ion-card-content>
                    </ion-card>
                </div>
            </ion-content>
        </ng-template>
    </ion-modal>

    <ion-alert trigger="present-alert"
        header="¬øDeseas asignar {{salon?.grado}} ¬∞ {{salon?.grupo}} al docente {{docente?.nombre}} {{docente?.apellidos}}?"
        [buttons]="alertButtons"></ion-alert>

    <ion-alert #deleteAlert [header]="alertHeaderDelete" [buttons]="alertButtonsDelete"></ion-alert>


</ion-content>

<!-- header="¬øDeseas asignar {{salon.grado}} ¬∞ {{salon.grupo}} al docente {{docente.nombre}} {{docente.apellidos}}?" -->