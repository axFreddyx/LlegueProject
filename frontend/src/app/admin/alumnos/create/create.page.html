<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button menu="menuId"></ion-menu-button>
      <ion-back-button text="Regresar"></ion-back-button>
    </ion-buttons>

    <ion-title class="text-center">
      <div class="header-title">
        <img src="assets/img/escuela.png" alt="" class="logo-title">
      </div>
    </ion-title>

    <ion-buttons slot="end">
      <ion-button routerLink="/perfil" title="Mi perfil">
        <ion-icon name="person-circle-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="alumno-container container text-center ion-padding">

    <!-- Título y descripción -->
    <h1 class="titulo">Crear Alumno</h1>
    <p>Complete la información para registrar un nuevo alumno en el sistema.</p>
    <!-- Formulario -->
    <ion-grid fixed>
      <ion-row>

        <!-- Foto circular -->
        <ion-col size="12">
          <div class="alumno-foto-container">
            <div class="alumno-foto-wrapper">
              <img *ngIf="previewImg" [src]="previewImg" alt="Vista previa" class="alumno-foto" />
              <div *ngIf="!previewImg" class="alumno-foto-placeholder">+</div>
              <input
                #fileInput
                type="file"
                accept="image/*"
                (change)="onFileChange($event)"
                class="alumno-foto-input"
              />
            </div>
          </div>
        </ion-col>

        <!-- Nombre -->
        <ion-col size="12" size-md="6">
          <ion-item class="alumno-item">
            <ion-label position="stacked" class="alumno-label">Nombre(s)</ion-label>
            <ion-input type="text" [(ngModel)]="data.nombre" placeholder="Ingrese nombre(s)" class="alumno-input"></ion-input>
          </ion-item>
        </ion-col>

        <!-- Apellidos -->
        <ion-col size="12" size-md="6">
          <ion-item class="alumno-item">
            <ion-label position="stacked" class="alumno-label">Apellidos</ion-label>
            <ion-input type="text" [(ngModel)]="data.apellidos" placeholder="Ingrese apellidos" class="alumno-input"></ion-input>
          </ion-item>
        </ion-col>

        <!-- Botón agregar otro -->
        <ion-col size="12">
          <ion-button expand="block" *ngIf="data.nombre && data.apellidos" (click)="ingresarOtroAlumno()" class="btn-secundario w-100" fill="clear"
            shape="round">
            Ingresar otro alumno
            <ion-icon name="add-circle-outline" slot="end"></ion-icon>
          </ion-button>
        </ion-col>

        <!-- Lista de alumnos -->
        <ion-col size="12" *ngIf="isIngresado && alumnosIngresados.length > 0">
          <ion-label>Alumnos ingresados</ion-label>
          <table class="alumno-tabla">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Apellidos</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let alumno of alumnosIngresados">
                <td>{{ alumno.nombre }}</td>
                <td>{{ alumno.apellidos }}</td>
                <td>
                  <ion-button fill="clear" (click)="alumnosIngresados.splice(alumnosIngresados.indexOf(alumno), 1)">
                    <ion-icon name="trash-outline"></ion-icon>
                  </ion-button>
                </td>
              </tr>
            </tbody>
          </table>
        </ion-col>

        <!-- Botón principal -->
        <ion-col size="12">
          <ion-button expand="block" (click)="save()" class="btn-principal">
            Ingresar Alumno
            <ion-icon name="checkmark-circle-outline" slot="end"></ion-icon>
          </ion-button>
        </ion-col>

      </ion-row>
    </ion-grid>
  </div>
</ion-content>
